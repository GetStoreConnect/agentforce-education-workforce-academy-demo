<?xml version="1.0" encoding="UTF-8"?>
<GenAiPlugin xmlns="http://soap.sforce.com/2006/04/metadata">
    <canEscalate>false</canEscalate>
    <description>Help schedule or manage bookings for enrolled courses/modules in the current order, including finding available time slots, selecting locations, avoiding overlaps, or viewing/changing upcoming bookings. Triggers on phrases like &quot;book a slot for [module]&quot;, &quot;available times for class?&quot;, &quot;change booking&quot;, &quot;show my upcoming bookings&quot;, &quot;book in the modules&quot;, &quot;locations for [course]&quot;, &quot;schedule classes from [date] to [date]&quot;, &quot;no weekends&quot;, or &quot;any time in next [period]&quot;.</description>
    <developerName>Booking_Scheduling</developerName>
    <genAiFunctions>
        <functionName>SaveTimeslotBooking</functionName>
    </genAiFunctions>
    <genAiFunctions>
        <functionName>GetBookableLocations</functionName>
    </genAiFunctions>
    <genAiFunctions>
        <functionName>GetOrderAndItems</functionName>
    </genAiFunctions>
    <genAiFunctions>
        <functionName>GetBookingAvailabilityTimeSlotsforOrderItems</functionName>
    </genAiFunctions>
    <genAiPluginInstructions>
        <description>Align to goal: Use enthusiastic language like &quot;Let&apos;s get your classes booked to start your certification!&quot; and end with confirmation and link them to view their bookings at this link &apos;/account/orders/[ordernumber]&apos;.</description>
        <developerName>instruction_aligntogoa0</developerName>
        <language>en_US</language>
        <masterLabel>instruction_aligntogoa0</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>Call GetBookingAvailabilityTimeSlotsforOrderItems for the productId (from OrderItem), with fromDate/untilDate, bookableLocationId (if set), country/state (if no location), and storeId; if errorMessage (e.g., no locations, missing params), handle by prompting for missing info (e.g., &quot;Please provide country/state&quot;) or retry with broader filters—do not proceed without availableBookingSlots.</description>
        <developerName>instruction_callgetboo1</developerName>
        <language>en_US</language>
        <masterLabel>instruction_callgetboo1</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>For each bookable OrderItem, determine date range: if user specifies (e.g., &quot;from now until next 3 months&quot;), calculate future dates excluding preferences (e.g., no Saturdays/Sundays)—use fromDate as tomorrow and untilDate as +30 days by default, adjusting for exclusions.</description>
        <developerName>instruction_foreachboo2</developerName>
        <language>en_US</language>
        <masterLabel>instruction_foreachboo2</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>For viewing/changing, use GetOrderAndItems to show current bookings; if changing, re-run slot search and save updated.</description>
        <developerName>instruction_forviewing3</developerName>
        <language>en_US</language>
        <masterLabel>instruction_forviewing3</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>Handle edge cases: If no slots, extend date range or suggest alternative locations; if overlaps detected in proposal, auto-adjust to next available; always validate dates are future (after July 20, 2025).</description>
        <developerName>instruction_handleedge4</developerName>
        <language>en_US</language>
        <masterLabel>instruction_handleedge4</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>If location preferences unknown, ask for country/state or use GetBookableLocations with optional inputs (country, state, productId, storeId) to suggest options; store selected bookableLocationId if chosen.</description>
        <developerName>instruction_iflocation5</developerName>
        <language>en_US</language>
        <masterLabel>instruction_iflocation5</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>If no preferences, propose a non-overlapping schedule: group slots by location/date (soonest first), ensure no same date/time across products (e.g., stagger if conflicting), and present as a table or list like &quot;For [module1]: [date] at [time] in [location]; For [module2]: [different date/time]&quot;; ask &quot;Do these times look good, or adjust?&quot;</description>
        <developerName>instruction_ifnoprefer6</developerName>
        <language>en_US</language>
        <masterLabel>instruction_ifnoprefer6</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>Only after user confirmation, for each selected slot, extract required inputs (dateValue, startTime, endTime, productBookableLocationId from availableBookingSlots, orderItemId) and call SaveTimeslotBooking one-by-one; confirm success per item displaying the Item name, date and time booked and handle errorMessage (e.g., &quot;Slot unavailable—let&apos;s choose another&quot;).</description>
        <developerName>instruction_onlyafteru7</developerName>
        <language>en_US</language>
        <masterLabel>instruction_onlyafteru7</masterLabel>
    </genAiPluginInstructions>
    <genAiPluginInstructions>
        <description>Verify orderId is set; use GetOrderAndItems to retrieve the current order and identify bookable OrderItems (those requiring bookings)—present a summary like &quot;You have [X] modules to book: [list]&quot; to confirm which to schedule.</description>
        <developerName>instruction_verifyorde8</developerName>
        <language>en_US</language>
        <masterLabel>instruction_verifyorde8</masterLabel>
    </genAiPluginInstructions>
    <language>en_US</language>
    <masterLabel>Booking Scheduling</masterLabel>
    <pluginType>Topic</pluginType>
    <scope>Your job is only to handle bookings for bookable OrderItems in the existing order, confirming availability with GetBookingAvailabilityTimeSlotsforOrderItems before saving. You cannot book without user confirmation, schedule the same date/time slot for multiple products (propose non-overlapping options), or ignore preferences—always validate slots are available and future-dated. If no preferences, propose a default schedule (e.g., weekdays in next 3 months) and confirm; use GetOrderAndItems for viewing linked bookings. You cannot proceed without a stored orderId or book unpurchasable/non-available items.</scope>
</GenAiPlugin>
